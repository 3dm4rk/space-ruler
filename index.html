<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Card Battler</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- HOME -->
  <div id="home" class="screen">
    <div class="wrap hero">
      <div class="heroCard">
        <div class="heroTop">
          <div class="brand">
            <div class="brandDot"></div>
            <span class="brandName">CARD BATTLER</span>
          </div>
          <div class="heroTopRight">
            <span class="pill" id="homeGoldTag">Gold: 0</span>
            <button class="btn btnGhost" id="btnHomeProfile">ğŸ‘¤ Profile</button>
            <button class="btn btnGhost" id="btnHomeShop">ğŸ›’ Shop</button>
          </div>
        </div>

        <h1 class="heroTitle">Pick a Card. <span class="glow">Survive.</span></h1>
        <p class="heroSub">
          Endless enemies. Your HP and Shield carry over. Earn gold. Buy relics + upcoming cards.
        </p>

        <div class="heroActions">
          <button class="btn btnPrimary" id="btnBattleNow">âš”ï¸ Battle Now</button>
          <button class="btn btnGhost" id="btnOpenGallery">ğŸƒ Gallery</button>
        </div>

        <div class="heroHints">
          <div class="hint">ğŸ›¡ï¸ Shield absorbs damage first</div>
          <div class="hint">ğŸª¬ Relics can be bought</div>
          <div class="hint">ğŸ›’ Shop = relics + future cards</div>
        </div>
      </div>
    </div>
  </div>

  <!-- PROFILE -->
  <div id="profile" class="screen" style="display:none;">
    <div class="wrap">
      <div class="topbar">
        <div>
          <div class="titleRow">
            <h2 class="pageTitle">Profile</h2>
            <span class="pill" id="profileRankPill">Rank: Rookie</span>
            <span class="pill" id="profileXpPill">XP: 0</span>
          </div>
          <p class="muted" style="margin:6px 0 0;">Your progress is saved on this device.</p>
        </div>

        <div class="topbarActions">
          <button class="btn btnGhost" id="btnProfileBackHome">ğŸ  Home</button>
        </div>
      </div>

      <div class="profileCard">
        <div class="profileTop">
          <div>
            <div class="muted" style="font-weight:900;letter-spacing:.3px;">PLAYER NAME</div>
            <div class="profileNameRow">
              <input id="profileNameInput" class="profileInput" placeholder="Your name" maxlength="18" />
              <button class="btn btnPrimary" id="btnSaveProfileName">Save</button>
            </div>
            <div class="muted" style="margin-top:6px;">Tip: this is your account label (doesnâ€™t rename the fighter card).</div>
          </div>
          <div class="rankBadge" id="rankBadge">Rookie</div>
        </div>

        <div class="rankProgress">
          <div class="rankProgressTop">
            <div class="muted" id="rankProgressLabel">Next rank: â€”</div>
            <div class="muted" id="rankProgressNums">0 / 0</div>
          </div>
          <div class="rankBar"><div class="rankBarFill" id="rankBarFill"></div></div>
        </div>

        <div class="profileStatsGrid">
          <div class="statCard">
            <div class="statLabel">Wins</div>
            <div class="statValue" id="statWins">0</div>
          </div>
          <div class="statCard">
            <div class="statLabel">Losses</div>
            <div class="statValue" id="statLosses">0</div>
          </div>
          <div class="statCard">
            <div class="statLabel">Best Streak</div>
            <div class="statValue" id="statBestStreak">0</div>
          </div>
          <div class="statCard">
            <div class="statLabel">Highest Stage</div>
            <div class="statValue" id="statHighStage">0</div>
          </div>
        </div>

        <div class="profileFoot">
          <div class="muted">Equipped relic:</div>
          <div class="profileRelic" id="profileRelic">None</div>
        </div>
      </div>

    </div>
  </div>

  <!-- SHOP -->
  <div id="shop" class="screen" style="display:none;">
    <div class="wrap">
      <div class="topbar">
        <div>
          <div class="titleRow">
            <h2 class="pageTitle">Shop</h2>
            <span class="pill" id="shopGoldTag">Gold: 0</span>
          </div>
          <p class="muted">Buy relics (auto-equip + saved) and upcoming cards (Owned for later).</p>

          <!-- âœ… Tabs -->
          <div class="shopTabs">
            <button class="tabBtn tabActive" id="tabShopRelics">ğŸª¬ Relics</button>
            <button class="tabBtn" id="tabShopCards">ğŸƒ Upcoming Cards</button>
            <button class="tabBtn" id="tabShopLucky">ğŸ° Lucky Draw</button>
          </div>
        </div>

        <div class="topbarActions">
          <button class="btn btnSoft" id="btnRedeemCode">ğŸ Redeem Code</button>
          <button class="btn btnGhost" id="btnShopProfile">ğŸ‘¤ Profile</button>
          <button class="btn btnGhost" id="btnShopBackHome">ğŸ  Home</button>
          <button class="btn btnGhost" id="btnShopToBattle">âš”ï¸ Battle</button>
        </div>
      </div>

      <!-- Relics tab -->
      <div id="shopRelicsWrap">
        <div id="shopRelicGrid" class="shopGrid"></div>
      </div>

      <!-- Cards tab -->
      <div id="shopCardsWrap" style="display:none;">
        <div id="shopGrid" class="shopGrid"></div>
      </div>

      <!-- Lucky Draw tab -->
      <div id="shopLuckyWrap" style="display:none;">
        <div class="luckyWrap">
          <div class="luckyHeader">
            <div>
              <h3 class="luckyTitle">ğŸ° Lucky Draw</h3>
              <p class="muted" style="margin:6px 0 0;">Spin for rewards. 1% chance to pull the <b>new entity</b> card.</p>
            </div>
            <div class="luckyCosts">
              <span class="pill">Single: 2000 Gold</span>
              <span class="pill">5x: 10000 Gold</span>
            </div>
          </div>

          <div class="luckyMachine" id="luckyMachine">
            <div class="luckyWheel" id="luckyWheel">
              <div class="luckyGlow"></div>
              <div class="luckyCenter">âœ¨</div>
            </div>
            <div class="luckyActions">
              <button class="btn btnPrimary big" id="btnLuckySingle">ğŸŸï¸ Draw 1</button>
              <button class="btn btnSoft big" id="btnLuckyFive">ğŸŸï¸ Draw 5</button>
            </div>
            <div class="luckyOdds">
              <div class="oddsRow"><span class="badge">1%</span> Card (Relicborn Titan)</div>
              <div class="oddsRow"><span class="badge">99%</span> Gold Reward</div>
              <div class="oddsRow muted" style="margin-top:6px;">
                Gold pool: 1 - 100
              </div>
            </div>
          </div>

          <div class="luckyResults" id="luckyResults"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- GALLERY -->
  <div id="gallery" class="screen" style="display:none;">
    <div class="wrap">
      <div class="topbar">
        <div>
          <div class="titleRow">
            <h2 class="pageTitle">Gallery</h2>
            <span class="pill">All Fighters</span>
          </div>
          <p class="muted">See full card stats + skills.</p>
        </div>

        <div class="topbarActions">
          <button class="btn btnPrimary" id="btnGalleryToBattle">âš”ï¸ Battle</button>
          <button class="btn btnGhost" id="btnBackHomeFromGallery">ğŸ  Home</button>
        </div>
      </div>

      <div id="galleryGrid" class="grid"></div>
    </div>
  </div>

  <!-- SETUP -->
  <div id="setup" class="screen" style="display:none;">
    <div class="wrap">
      <div class="topbar">
        <div>
          <div class="titleRow">
            <h2 class="pageTitle">Choose Your Fighter</h2>
            <span class="pill">Tap a card to start</span>
          </div>
          <p class="muted">Your stats carry through the entire run.</p>
        </div>

        <div class="topbarActions">
          <button class="btn btnGhost" id="btnSetupGallery">ğŸƒ Gallery</button>
          <button class="btn btnGhost" id="btnBackHomeFromSetup">ğŸ  Home</button>
        </div>
      </div>

      <div id="pickGrid" class="grid"></div>
    </div>
  </div>

  <!-- GAME -->
  <div id="game" class="screen" style="display:none;">
    <div class="wrap">

      <div class="gameTop">
        <div class="gameTopLeft">
          <div class="titleRow">
            <h2 class="pageTitle">Battle Arena</h2>
            <span class="pill" id="stageTag">Stage: 1</span>
            <span class="pill" id="roundTag">Round: 1</span>
            <span class="pill" id="turnTag">Turn: Player</span>
            <span class="pill" id="enemyPassiveTag">Enemy Passive: 35%</span>
            <span class="pill" id="enemyAiTag">Enemy AI: Aggressive</span>
            <span class="pill" id="goldTag">Gold: 0</span>
          </div>
          <p class="muted">Relics bought from shop auto-equip and stay for future runs.</p>
        </div>

        <div class="gameTopActions">
          <button class="btn btnGhost" id="btnOpenShop">ğŸ›’ Shop</button>
          <button class="btn btnGhost" id="btnGameProfile">ğŸ‘¤ Profile</button>
          <button class="btn btnGhost" id="btnReset">ğŸ” Restart Run</button>
          <button class="btn btnGhost" id="btnExitToHome">ğŸ  Home</button>
        </div>
      </div>

      <div class="gameGrid">
        <div class="arenaCard" id="arenaCard">
          <div class="fighters">

            <div class="fighterCard player" id="playerCard">
              <div class="fighterHeader">
                <div class="fighterName">
                  <span class="roleTag rolePlayer">PLAYER</span>
                  <h3 id="pName">Player</h3>
                </div>
                <div class="skillTools">
                  <span class="skillPill" id="pSkillTag">Skill</span>
                  <button class="infoBtn" id="pInfo" type="button" aria-label="Player ability info">i</button>
                </div>
              </div>

              <div class="imgFrame" id="pFrame">
                <img id="pImg" class="cardImg" src="" alt="Player card"/>
              </div>

              <div class="bars">
                <div class="barRow">
                  <div class="barLabel">
                    <span>HP</span>
                    <span id="pHP" class="barNum">0/0</span>
                  </div>
                  <div class="bar">
                    <div class="barFill hp" id="pHpBar"></div>
                  </div>
                </div>

                <div class="barRow">
                  <div class="barLabel">
                    <span>Shield</span>
                    <span id="pShield" class="barNum">0</span>
                  </div>
                  <div class="bar">
                    <div class="barFill shield" id="pShieldBar"></div>
                  </div>
                </div>
              </div>

              <div class="chips">
                <span class="chip">ATK: <b id="pATK">0</b></span>
                <span class="chip">DEF: <b id="pDEF">0</b></span>
                <span class="chip">Status: <b id="pStatus">None</b></span>
              </div>
            </div>

            <div class="fighterCard enemy" id="enemyCard">
              <div class="fighterHeader">
                <div class="fighterName">
                  <span class="roleTag roleEnemy">ENEMY</span>
                  <h3 id="eName">Enemy</h3>
                </div>
                <div class="skillTools">
                  <span class="skillPill" id="eSkillTag">Skill</span>
                  <button class="infoBtn" id="eInfo" type="button" aria-label="Enemy ability info">i</button>
                </div>
              </div>

              <div class="imgFrame" id="eFrame">
                <img id="eImg" class="cardImg" src="" alt="Enemy card"/>
              </div>

              <div class="bars">
                <div class="barRow">
                  <div class="barLabel">
                    <span>HP</span>
                    <span id="eHP" class="barNum">0/0</span>
                  </div>
                  <div class="bar">
                    <div class="barFill hp" id="eHpBar"></div>
                  </div>
                </div>

                <div class="barRow">
                  <div class="barLabel">
                    <span>Shield</span>
                    <span id="eShield" class="barNum">0</span>
                  </div>
                  <div class="bar">
                    <div class="barFill shield" id="eShieldBar"></div>
                  </div>
                </div>
              </div>

              <div class="chips">
                <span class="chip">ATK: <b id="eATK">0</b></span>
                <span class="chip">DEF: <b id="eDEF">0</b></span>
                <span class="chip">Status: <b id="eStatus">None</b></span>
              </div>
            </div>

          </div>

          <div class="actionDock">
            <button class="btn btnPrimary big" id="btnAttack">âš”ï¸ Attack</button>
            <button class="btn btnSoft big" id="btnSkill">âœ¨ Use Skill</button>
            <button class="btn btnGhost big" id="btnEnd">â­ï¸ End Turn</button>
          </div>
        </div>

        <div class="sidePanel">
          <div class="panelCard">
            <div class="panelTitle">
              <h3>Tip</h3>
              <span class="pill">Quick Guide</span>
            </div>

            <ul class="tipList">
              <li><b>Shield</b> absorbs damage first.</li>
              <li><b>Relics</b> are bought in shop and auto-equip.</li>
              <li><b>Enemy AI</b> changes behavior each stage.</li>
            </ul>
          </div>

          <div class="panelCard">
            <div class="panelTitle">
              <h3>Battle Log</h3>
              <span class="pill">Live</span>
            </div>
            <div class="log" id="log"></div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- SURVIVAL RESULT MODAL -->
  <div id="resultModal" class="modalOverlay" style="display:none;">
    <div class="modalBox">
      <div class="modalHeader">
        <div class="modalTitle" id="resultTitle">Victory!</div>
        <div class="modalPill" id="resultStage">Stage 1</div>
      </div>

      <div class="modalBody">
        <p class="modalText" id="resultText">You defeated the enemy!</p>

        <!-- âœ… Defeat modal cleanup: removed Gold / Total / HP / Shield blocks -->

        <div class="modalHint" id="modalHint">Next enemy incoming...</div>
      </div>

      <div class="modalActions">
        <button class="btn btnSoft big" id="btnNextEnemy">âš”ï¸ Next Enemy</button>
        <button class="btn btnGhost big" id="btnPlayAgain">ğŸ” Restart Run</button>
      </div>
    </div>

	  </div>


  <!-- ğŸ° LUCKY DRAW MODAL -->
  <div id="luckyModal" class="modalOverlay" style="display:none;">
    <div class="modalBox luckyModalBox">
      <div class="modalHeader">
        <div class="modalTitle" id="luckyModalTitle">ğŸ° Lucky Draw</div>
        <div class="modalPill" id="luckyModalPill">Result</div>
      </div>
      <div class="modalBody">
        <!-- âœ… upgraded: multi-draw progress + mini reveals -->
        <div class="luckyProgress" id="luckyProgress" style="display:none;">
          <span class="pill" id="luckyProgressPill">1 / 5</span>
          <span class="muted" id="luckyProgressText">Multi draw</span>
        </div>

        <div class="luckyReveal">
          <div class="luckyCard" id="luckyCardReveal">
            <div class="luckyCardTop">
              <div class="luckyCardName" id="luckyRewardName">Reward</div>
              <div class="pill" id="luckyRewardRarity">Common</div>
            </div>
            <div class="luckyCardBody" id="luckyRewardBody">
              <div class="muted">Your reward appears here.</div>
            </div>
          </div>
        </div>

        <div class="luckyMultiStrip" id="luckyMultiStrip" style="display:none;"></div>

        <p class="modalHint" id="luckyModalHint">Tap claim to add it to your account.</p>
      </div>
      <div class="modalActions">
        <button class="btn btnPrimary big" id="btnLuckyClaim">âœ¨ Claim</button>
        <button class="btn btnGhost big" id="btnLuckyClose">Close</button>
      </div>
    </div>
  </div>

  
 <!-- âœ… SFX -->
  <audio id="sfxClick" src="sfx/click.mp3" preload="auto"></audio>
  <audio id="sfxAttack" src="sfx/attack.mp3" preload="auto"></audio>
  <audio id="sfxSkill" src="sfx/skill.mp3" preload="auto"></audio>
 <audio id="sfxEnd" src="sfx/endturn.mp3" preload="auto"></audio>
 <audio id="sfxWin" src="sfx/win.mp3" preload="auto"></audio>
 <audio id="sfxLose" src="sfx/lose.mp3" preload="auto"></audio>
 <audio id="sfxBuy" src="sfx/buy.mp3" preload="auto"></audio>
 
  
    <audio id="sfxDraw" src="sfx/draw.mp3" preload="auto"></audio>
  <audio id="sfxJackpot" src="sfx/jackpot.mp3" preload="auto"></audio>
<script src="game.js?v=4"></script>
</body>
</html>
